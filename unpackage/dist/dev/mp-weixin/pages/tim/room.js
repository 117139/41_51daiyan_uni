(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tim/room"],{68:
/*!*****************************************************************************!*\
  !*** E:/phpStudy/WWW/41_51daiyan_uni/main.js?{"page":"pages%2Ftim%2Froom"} ***!
  \*****************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";(function(t){e(/*! uni-pages */4);n(e(/*! vue */2));var i=n(e(/*! ./pages/tim/room.vue */69));function n(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},69:
/*!**********************************************************!*\
  !*** E:/phpStudy/WWW/41_51daiyan_uni/pages/tim/room.vue ***!
  \**********************************************************/
/*! no static exports found */function(t,i,e){"use strict";e.r(i);var n=e(/*! ./room.vue?vue&type=template&id=48d0d46b&filter-modules=eyJmaWx0ZXIiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6MTAwODQsImF0dHJzIjp7Im1vZHVsZSI6ImZpbHRlciIsImxhbmciOiJ3eHMiLCJzcmMiOiIuLi8uLi91dGlscy9maWx0ZXIud3hzIn0sImVuZCI6MTAwODR9fQ%3D%3D& */70),o=e(/*! ./room.vue?vue&type=script&lang=js& */72);for(var s in o)"default"!==s&&function(t){e.d(i,t,(function(){return o[t]}))}(s);e(/*! ./room.vue?vue&type=style&index=0&lang=scss& */74);var a,g=e(/*! ../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */18),r=e(/*! ../../utils/filter.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5CphpStudy%5CWWW%5C41_51daiyan_uni%5Cpages%5Ctim%5Croom.vue&module=filter&lang=wxs */76),c=Object(g["default"])(o["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],a);"function"===typeof r["default"]&&Object(r["default"])(c),c.options.__file="pages/tim/room.vue",i["default"]=c.exports},70:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** E:/phpStudy/WWW/41_51daiyan_uni/pages/tim/room.vue?vue&type=template&id=48d0d46b&filter-modules=eyJmaWx0ZXIiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6MTAwODQsImF0dHJzIjp7Im1vZHVsZSI6ImZpbHRlciIsImxhbmciOiJ3eHMiLCJzcmMiOiIuLi8uLi91dGlscy9maWx0ZXIud3hzIn0sImVuZCI6MTAwODR9fQ%3D%3D& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,i,e){"use strict";e.r(i);var n=e(/*! -!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./room.vue?vue&type=template&id=48d0d46b&filter-modules=eyJmaWx0ZXIiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6MTAwODQsImF0dHJzIjp7Im1vZHVsZSI6ImZpbHRlciIsImxhbmciOiJ3eHMiLCJzcmMiOiIuLi8uLi91dGlscy9maWx0ZXIud3hzIn0sImVuZCI6MTAwODR9fQ%3D%3D& */71);e.d(i,"render",(function(){return n["render"]})),e.d(i,"staticRenderFns",(function(){return n["staticRenderFns"]})),e.d(i,"recyclableRender",(function(){return n["recyclableRender"]})),e.d(i,"components",(function(){return n["components"]}))},71:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/phpStudy/WWW/41_51daiyan_uni/pages/tim/room.vue?vue&type=template&id=48d0d46b&filter-modules=eyJmaWx0ZXIiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6MTAwODQsImF0dHJzIjp7Im1vZHVsZSI6ImZpbHRlciIsImxhbmciOiJ3eHMiLCJzcmMiOiIuLi8uLi91dGlscy9maWx0ZXIud3hzIn0sImVuZCI6MTAwODR9fQ%3D%3D& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,i,e){"use strict";var n;e.r(i),e.d(i,"render",(function(){return o})),e.d(i,"staticRenderFns",(function(){return a})),e.d(i,"recyclableRender",(function(){return s})),e.d(i,"components",(function(){return n}));var o=function(){var t=this,i=t.$createElement,e=(t._self._c,t.__map(t.msgList,(function(i,e){var n=t.nodesFliter(i.payload.text),o=t.getarg(i.payload.extension,"a",i.payload.data),s=t.getarg(i.payload.extension,"a1",i.payload.data),a=t.getarg(i.payload.extension,"a2",i.payload.data),g=t.getarg(i.payload.extension,"a3",i.payload.data),r=t.getarg(i.payload.extension,"a2",i.payload.data),c=t.getarg(i.payload.extension,"a3",i.payload.data),f=t.getarg(i.payload.extension,"a",i.payload.data),l=t.getarg(i.payload.extension,"a1",i.payload.data),d=t.getarg(i.payload.extension,"a2",i.payload.data),u=t.timeFliter(i.time),h=t.gettime1(e-1),p=t.nodesFliter(i.payload.text),m=t.getarg(i.payload.extension,"a",i.payload.data),b=t.getarg(i.payload.extension,"a1",i.payload.data),A=t.getarg(i.payload.extension,"a2",i.payload.data),v=t.getarg(i.payload.extension,"a3",i.payload.data),y=t.getarg(i.payload.extension,"a2",i.payload.data),M=t.getarg(i.payload.extension,"a3",i.payload.data),x=t.getarg(i.payload.extension,"a",i.payload.data),w=t.getarg(i.payload.extension,"a1",i.payload.data),D=t.getarg(i.payload.extension,"a2",i.payload.data);return{$orig:t.__get_orig(i),m0:n,m1:o,m2:s,m3:a,m4:g,m5:r,m6:c,m7:f,m8:l,m9:d,m10:u,m11:h,m12:p,m13:m,m14:b,m15:A,m16:v,m17:y,m18:M,m19:x,m20:w,m21:D}})));t._isMounted||(t.e0=function(i){t.isFocus=!0},t.e1=function(i){t.isFocus=!1}),t.$mp.data=Object.assign({},{$root:{l0:e}})},s=!1,a=[];o._withStripped=!0},72:
/*!***********************************************************************************!*\
  !*** E:/phpStudy/WWW/41_51daiyan_uni/pages/tim/room.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";e.r(i);var n=e(/*! -!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./room.vue?vue&type=script&lang=js& */73),o=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=o.a},73:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/phpStudy/WWW/41_51daiyan_uni/pages/tim/room.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=s(e(/*! ../../service.js */8)),o=e(/*! vuex */10);s(e(/*! ../../commen/tim/user.js */15));function s(t){return t&&t.__esModule?t:{default:t}}function a(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}function g(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?a(Object(e),!0).forEach((function(i){r(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}function r(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var c={data:function(){return{conversationActive:null,toUserId:"",toUserInfo:null,userInfo:null,nextReqMessageID:"",count:15,isCompleted:"",msgList:[],TIM:null,textMsg:"",isHistoryLoading:!1,scrollAnimation:!1,scrollTop:0,scrollToView:"",msgImgList:[],myuid:0,RECORDER:t.getRecorderManager(),isVoice:!1,voiceTis:"按住 说话",recordTis:"手指上滑 取消发送",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:0,AUDIO:t.createInnerAudioContext(),playMsgid:null,VoiceTimer:null,popupLayerClass:"",hideMore:!0,hideEmoji:!0,emojiList:this.$commen.emojiList,onlineEmoji:{"100.gif":"AbNQgA.gif","101.gif":"AbN3ut.gif","102.gif":"AbNM3d.gif","103.gif":"AbN8DP.gif","104.gif":"AbNljI.gif","105.gif":"AbNtUS.gif","106.gif":"AbNGHf.gif","107.gif":"AbNYE8.gif","108.gif":"AbNaCQ.gif","109.gif":"AbNN4g.gif","110.gif":"AbN0vn.gif","111.gif":"AbNd3j.gif","112.gif":"AbNsbV.gif","113.gif":"AbNwgs.gif","114.gif":"AbNrD0.gif","115.gif":"AbNDuq.gif","116.gif":"AbNg5F.gif","117.gif":"AbN6ET.gif","118.gif":"AbNcUU.gif","119.gif":"AbNRC4.gif","120.gif":"AbNhvR.gif","121.gif":"AbNf29.gif","122.gif":"AbNW8J.gif","123.gif":"AbNob6.gif","124.gif":"AbN5K1.gif","125.gif":"AbNHUO.gif","126.gif":"AbNIDx.gif","127.gif":"AbN7VK.gif","128.gif":"AbNb5D.gif","129.gif":"AbNX2d.gif","130.gif":"AbNLPe.gif","131.gif":"AbNjxA.gif","132.gif":"AbNO8H.gif","133.gif":"AbNxKI.gif","134.gif":"AbNzrt.gif","135.gif":"AbU9Vf.gif","136.gif":"AbUSqP.gif","137.gif":"AbUCa8.gif","138.gif":"AbUkGQ.gif","139.gif":"AbUFPg.gif","140.gif":"AbUPIS.gif","141.gif":"AbUZMn.gif","142.gif":"AbUExs.gif","143.gif":"AbUA2j.gif","144.gif":"AbUMIU.gif","145.gif":"AbUerq.gif","146.gif":"AbUKaT.gif","147.gif":"AbUmq0.gif","148.gif":"AbUuZV.gif","149.gif":"AbUliF.gif","150.gif":"AbU1G4.gif","151.gif":"AbU8z9.gif","152.gif":"AbU3RJ.gif","153.gif":"AbUYs1.gif","154.gif":"AbUJMR.gif","155.gif":"AbUadK.gif","156.gif":"AbUtqx.gif","157.gif":"AbUUZ6.gif","158.gif":"AbUBJe.gif","159.gif":"AbUdIO.gif","160.gif":"AbU0iD.gif","161.gif":"AbUrzd.gif","162.gif":"AbUDRH.gif","163.gif":"AbUyQA.gif","164.gif":"AbUWo8.gif","165.gif":"AbU6sI.gif","166.gif":"AbU2eP.gif","167.gif":"AbUcLt.gif","168.gif":"AbU4Jg.gif","169.gif":"AbURdf.gif","170.gif":"AbUhFS.gif","171.gif":"AbU5WQ.gif","172.gif":"AbULwV.gif","173.gif":"AbUIzj.gif","174.gif":"AbUTQs.gif","175.gif":"AbU7yn.gif","176.gif":"AbUqe0.gif","177.gif":"AbUHLq.gif","178.gif":"AbUOoT.gif","179.gif":"AbUvYF.gif","180.gif":"AbUjFU.gif","181.gif":"AbaSSJ.gif","182.gif":"AbUxW4.gif","183.gif":"AbaCO1.gif","184.gif":"Abapl9.gif","185.gif":"Aba9yR.gif","186.gif":"AbaFw6.gif","187.gif":"Abaiex.gif","188.gif":"AbakTK.gif","189.gif":"AbaZfe.png","190.gif":"AbaEFO.gif","191.gif":"AbaVYD.gif","192.gif":"AbamSH.gif","193.gif":"AbaKOI.gif","194.gif":"Abanld.gif","195.gif":"Abau6A.gif","196.gif":"AbaQmt.gif","197.gif":"Abal0P.gif","198.gif":"AbatpQ.gif","199.gif":"Aba1Tf.gif","200.png":"Aba8k8.png","201.png":"AbaGtS.png","202.png":"AbaJfg.png","203.png":"AbaNlj.png","204.png":"Abawmq.png","205.png":"AbaU6s.png","206.png":"AbaaXn.png","207.png":"Aba000.png","208.png":"AbarkT.png","209.png":"AbastU.png","210.png":"AbaB7V.png","211.png":"Abafn1.png","212.png":"Abacp4.png","213.png":"AbayhF.png","214.png":"Abag1J.png","215.png":"Aba2c9.png","216.png":"AbaRXR.png","217.png":"Aba476.png","218.png":"Abah0x.png","219.png":"Abdg58.png"},windowsState:"",redenvelopeData:{rid:null,from:null,face:null,blessing:null,money:null},customModalVisible:!1,customData:"",customDescription:"",customExtension:"",focusedInput:"",isShow:!1}},computed:g({},(0,o.mapState)({loginMsg:"loginMsg",hasLogin:"hasLogin",currentMessageList:function(t){return t.currentMessageList}})),watch:{currentMessageList:function(t,i){this.msgList=t,this.screenMsg(t,i)}},onLoad:function(t){var i=this;console.log(t.id),this.hasLogin&&(this.toUserId=t.id?t.id:this.$store.state.toUserId,this.conversationActive=this.$store.state.conversationActive,this.TIM=this.$TIM,this.getmsg(),this.getMsgList(),this.AUDIO.onEnded((function(t){i.playMsgid=null})),this.RECORDER.onStart((function(t){i.recordBegin(t)})),this.RECORDER.onStop((function(t){i.recordEnd(t)})))},onShow:function(){var t=this;t.isShow=!0,setTimeout((function(){t.scrollToBottom(),t.scrollTop=99999999999999,t.isHistoryLoading=!1}),500)},onUnload:function(){var t=this.tim.setMessageRead({conversationID:this.conversationActive.conversationID});t.then((function(t){console.log("全部已读")})).catch((function(t){console.warn("setMessageRead error:",t)}))},onPullDownRefresh:function(){t.stopPullDownRefresh()},methods:{getmsg:function(){var i=this,e={token:i.loginMsg.userToken,id:i.toUserId};n.default.P_get("/getTx",e).then((function(e){console.log(e),1==e.code&&(i.toUserInfo=e.data,t.setNavigationBarTitle({title:e.data.name}))})).catch((function(i){console.log(i),t.showToast({icon:"none",title:"获取对方数据失败"})}))},gettime1:function(t){if(!(t<0)){console.log(t,t+1);var i=this.msgList[t].time,e=this.msgList[t+1].time;return console.log(this.getchattime(i),this.getchattime(e)),this.getchattime(i)!=this.getchattime(e)?this.getchattime(e):void 0}},jump:function(i){console.log(i),t.navigateTo({url:i.currentTarget.dataset.url})},onPullDownRefresh:function(){t.stopPullDownRefresh()},scrollToBottom:function(){this.isShow&&wx.pageScrollTo({scrollTop:9999999})},getarg:function(t,i,e){if("custom"!=e&&t){var n=/\\$/gi;t=t.replace(n,"");var o=JSON.parse(t);return o.hasOwnProperty(i)?o[i]:void 0}},nodesFliter:function(t){var i='<div class="ltbox_div" style="word-wrap:break-word;line-height:40upx;">'+t+"</div>";return i},timeFliter:function(t){var i=new Date(1e3*t),e=this.$commen.dateTimeFliter(i);return e},getchattime:function(t){if(t){var i=(new Date).getFullYear(),e=(new Date).getMonth()+1,n=(new Date).getDate();t=Number(1e3*t);var o=new Date(t),s=o.getFullYear(),a=o.getMonth()+1,g=o.getDate(),r=o.getHours(),c=o.getMinutes();return c<10&&(c="0"+c),console.log(o),s==i?a==e&&g==n?r+":"+c:a+"-"+g+" "+r+":"+c:s+"-"+a+"-"+g+" "+r+":"+c}},screenMsg:function(t,i){var e=this;if(t[0]&&i[0])if(t[0].ID!=i[0].ID&&t.length>=this.count){var n=t.length-i.length-1;this.$nextTick((function(){e.scrollToView=t[n].ID}))}else this.$nextTick((function(){e.scrollToView=t[t.length-1].ID}));else console.log("*****"),this.$nextTick((function(){e.scrollToView=t[t.length-1].ID,e.scrollTop=9999999}))},loadHistory:function(t){var i=this;this.isHistoryLoading=!0;var e=this.conversationActive.conversationID,n=this.tim.getMessageList({conversationID:e,nextReqMessageID:this.nextReqMessageID,count:this.count});n.then((function(t){i.$store.commit("unshiftCurrentMessageList",t.data.messageList),i.nextReqMessageID=t.data.nextReqMessageID,i.isCompleted=t.data.isCompleted,i.isHistoryLoading=!1}))},getMsgList:function(){var t=this,i=this.conversationActive.conversationID,e=this.tim.getMessageList({conversationID:i,count:this.count});e.then((function(i){console.log(i.data),i.data.nextReqMessageID&&(t.$store.commit("pushCurrentMessageList",i.data.messageList),t.nextReqMessageID=i.data.nextReqMessageID,t.isCompleted=i.data.isCompleted,t.scrollToView=i.data.messageList[i.data.messageList.length-1].ID)})),this.$nextTick((function(){this.scrollTop=9999,this.$nextTick((function(){this.scrollAnimation=!0}))}))},setPicSize:function(i){var e=t.upx2px(350),n=t.upx2px(350);if(i.w>e||i.h>n){var o=i.w/i.h;i.w=o>1?e:n*o,i.h=o>1?e/o:n}return i},showMore:function(){this.isVoice=!1,this.hideEmoji=!0,this.hideMore?(this.hideMore=!1,this.openDrawer()):this.hideDrawer()},openDrawer:function(){this.popupLayerClass="showLayer"},hideDrawer:function(){var t=this;this.popupLayerClass="",setTimeout((function(){t.hideMore=!0,t.hideEmoji=!0}),150)},chooseImage:function(){this.getImage("album")},camera:function(){this.getImage("camera")},handRedEnvelopes:function(){t.navigateTo({url:"HM-hand/HM-hand"}),this.hideDrawer()},getImage:function(i){var e=this;e.hideDrawer(),t.chooseImage({sourceType:[i],sizeType:["original","compressed"],count:1,success:function(t){e.sendMsg(t,"img")}})},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.openDrawer()):this.hideDrawer()},addEmoji:function(t){this.textMsg+=t.alt},textareaFocus:function(){"showLayer"==this.popupLayerClass&&0==this.hideMore&&this.hideDrawer()},sendText:function(){if(this.hideDrawer(),this.textMsg){var t=this.replaceEmoji(this.textMsg),i={text:t};this.sendMsg(i,"text"),this.textMsg=""}},replaceEmoji:function(t){var i=this,e=t.replace(/\[([^(\]|\[)]*)\]/g,(function(t,e){console.log("item: "+t);for(var n=0;n<i.emojiList.length;n++)for(var o=i.emojiList[n],s=0;s<o.length;s++){var a=o[s];if(a.alt==t){var g="http://51daiyan.test.upcdn.net/static_s/51daiyan/img/emoji/",r='<img class="emoji_i" src="'+g+a.url+'">';return console.log("imgstr: "+r),r}}}));return e},sendMsg:function(t,i){var e,n=this;console.log("????"),console.log(i),e="custom"==i?this.tim.createCustomMessage({to:this.toUserId,conversationType:"C2C",payload:{data:t.data,description:t.description,extension:t.extension}}):"img"==i?this.tim.createImageMessage({to:this.toUserId,conversationType:"C2C",payload:{file:t}}):this.tim.createTextMessage({to:this.toUserId,conversationType:"C2C",payload:{text:t.text}}),console.log("????1"),this.$store.commit("pushCurrentMessageList",e);var o=this.tim.sendMessage(e);o.then((function(t){n.$nextTick((function(){n.scrollToView=t.data.message.ID,n.scrollToBottom()}))}),(function(t){console.log(t)}))},addTextMsg:function(t){this.msgList.push(t)},addVoiceMsg:function(t){this.msgList.push(t)},addImgMsg:function(t){t.msg.content=this.setPicSize(t.msg.content),this.msgImgList.push(t.msg.content.url),this.msgList.push(t)},addRedEnvelopeMsg:function(t){this.msgList.push(t)},addSystemTextMsg:function(t){this.msgList.push(t)},addSystemRedEnvelopeMsg:function(t){this.msgList.push(t)},openRedEnvelope:function(i,e){var n=this,o=i.content.rid;t.showLoading({title:"加载中..."}),console.log("index: "+e),setTimeout((function(){0==o?n.redenvelopeData={rid:0,from:"大黑哥",face:"/static/img/im/face/face.jpg",blessing:"恭喜发财，大吉大利",money:"已领完"}:(n.redenvelopeData={rid:1,from:"售后客服008",face:"/static/img/im/face/face_2.jpg",blessing:"恭喜发财",money:"0.01"},i.content.isReceived||(n.sendSystemMsg({text:"你领取了"+(i.userinfo.uid==n.myuid?"自己":i.userinfo.username)+"的红包"},"redEnvelope"),console.log("this.msgList[index]: "+JSON.stringify(n.msgList[e])),n.msgList[e].msg.content.isReceived=!0)),t.hideLoading(),n.windowsState="show"}),200)},closeRedEnvelope:function(){var t=this;this.windowsState="hide",setTimeout((function(){t.windowsState=""}),200)},sendSystemMsg:function(t,i){var e=this.msgList[this.msgList.length-1].msg.id;e++;var n={type:"system",msg:{id:e,type:i,content:t}};this.screenMsg(n)},toDetails:function(i){t.navigateTo({url:"HM-details/HM-details?rid="+i})},showPic:function(i){t.previewImage({indicator:"none",current:i.content.url,urls:this.msgImgList})},playVoice:function(t){this.playMsgid=t.id,this.AUDIO.src=t.content.url,this.$nextTick((function(){this.AUDIO.play()}))},voiceBegin:function(t){t.touches.length>1||(this.initPoint.Y=t.touches[0].clientY,this.initPoint.identifier=t.touches[0].identifier,this.RECORDER.start({format:"mp3"}))},recordBegin:function(t){var i=this;this.recording=!0,this.voiceTis="松开 结束",this.recordLength=0,this.recordTimer=setInterval((function(){i.recordLength++}),1e3)},voiceCancel:function(){this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.willStop=!0,this.RECORDER.stop()},voiceIng:function(i){if(this.recording){var e=i.touches[0];this.initPoint.Y-e.clientY>=t.upx2px(100)?(this.willStop=!0,this.recordTis="松开手指 取消发送"):(this.willStop=!1,this.recordTis="手指上滑 取消发送")}},voiceEnd:function(t){this.recording&&(this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.RECORDER.stop())},recordEnd:function(t){if(clearInterval(this.recordTimer),this.willStop)console.log("取消发送录音");else{console.log("e: "+JSON.stringify(t));var i={length:0,url:t.tempFilePath},e=parseInt(this.recordLength/60),n=this.recordLength%60;e=e<10?"0"+e:e,n=n<10?"0"+n:n,i.length=e+":"+n,this.sendMsg(i,"voice")}this.willStop=!1},switchVoice:function(){this.hideDrawer(),this.isVoice=!this.isVoice},discard:function(){},customModal:function(){var i=this;t.showModal({title:"提示",content:"是否发送自定义消息",success:function(t){if(t.confirm){console.log("用户点击确定");var e={a:"a",a1:"a1",a2:"/pages/index/index",a3:"http://119.90.34.147:8080/finance/img/system/touxiang.jpg"};e=JSON.stringify(e);var n={data:"custom_good",description:"自定义消息的说明字段",extension:e};i.sendMsg(n,"custom")}else t.cancel&&console.log("用户点击取消")}})},handleClose:function(){this.rateModal=!1,this.isFocus=!1,this.isMoreOpen=!1,this.isEmojiOpen=!1},previmg:function(i){console.log(i);var e=[];e.push(i.currentTarget.dataset.url),t.previewImage({urls:e,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(t){console.log("选中了第"+(t.tapIndex+1)+"个按钮,第"+(t.index+1)+"张图片")},fail:function(t){console.log(t.errMsg)}}})}}};i.default=c}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},74:
/*!********************************************************************************************!*\
  !*** E:/phpStudy/WWW/41_51daiyan_uni/pages/tim/room.vue?vue&type=style&index=0&lang=scss& ***!
  \********************************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";e.r(i);var n=e(/*! -!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./room.vue?vue&type=style&index=0&lang=scss& */75),o=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=o.a},75:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/phpStudy/WWW/41_51daiyan_uni/pages/tim/room.vue?vue&type=style&index=0&lang=scss& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,i,e){},76:
/*!****************************************************************************************************************************************************************************************************!*\
  !*** E:/phpStudy/WWW/41_51daiyan_uni/utils/filter.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5CphpStudy%5CWWW%5C41_51daiyan_uni%5Cpages%5Ctim%5Croom.vue&module=filter&lang=wxs ***!
  \****************************************************************************************************************************************************************************************************/
/*! exports provided: default */function(t,i,e){"use strict";e.r(i);var n=e(/*! -!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader!./filter.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5CphpStudy%5CWWW%5C41_51daiyan_uni%5Cpages%5Ctim%5Croom.vue&module=filter&lang=wxs */77);i["default"]=n["default"]},77:
/*!***********************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader!E:/phpStudy/WWW/41_51daiyan_uni/utils/filter.wxs?vue&type=custom&index=0&blockType=script&issuerPath=E%3A%5CphpStudy%5CWWW%5C41_51daiyan_uni%5Cpages%5Ctim%5Croom.vue&module=filter&lang=wxs ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: default */function(t,i,e){"use strict";e.r(i),i["default"]=function(t){t.options.wxsCallMethods||(t.options.wxsCallMethods=[])}}},[[68,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/tim/room.js.map