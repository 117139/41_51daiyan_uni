(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tim/record"],{"0c22":function(t,o,n){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e,i=a(n("b704")),r=a(n("c9d4")),s=n("2f62");function a(t){return t&&t.__esModule?t:{default:t}}function c(t,o){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);o&&(e=e.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),n.push.apply(n,e)}return n}function u(t){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?c(Object(n),!0).forEach((function(o){l(t,o,n[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))}))}return t}function l(t,o,n){return o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,t}var g={name:"record",data:function(){return{btnkg:0,userList:r.default,datas:[],friendList:[],isActive:0}},onLoad:function(){if(this.hasLogin){this.getxcx_msg(),console.log("..."),console.log(this.conversationList),console.log(t.getStorageSync("userInfo"));this.loginMsg;this.friendList=[]}},onShow:function(){t.hideTabBarRedDot({index:2}),this.btnkg=0,this.hasLogin&&(this.isSDKReady?(console.log("2222"),this.getConversationList()):console.log("333333"))},onPullDownRefresh:function(){this.hasLogin&&(this.getxcx_msg(),this.isSDKReady?(console.log("2222"),this.getConversationList()):(console.log("333333"),t.stopPullDownRefresh()))},computed:u({},(0,s.mapState)(["hasLogin","loginMsg","forcedLogin","isLogin","isSDKReady","conversationList"])),watch:{isSDKReady:function(t){t&&this.getConversationList()}},methods:(e={updateUserInfo:function(){var t=this;console.log("将已经登陆的用户信息 提交到IM中");var o=t.tim.updateMyProfile({nick:t.loginMsg.nickname,avatar:t.loginMsg.avatarurl,gender:t.$TIM.TYPES.GENDER_MALE,selfSignature:t.loginMsg.introduction||"这个人比较懒还没有简介~~",allowType:t.$TIM.TYPES.ALLOW_TYPE_ALLOW_ANY});o.then((function(t){console.log("提交资料成功")})).catch((function(t){console.warn("updateMyProfile error:",t)}))},getxcx_msg:function(){var o=this,n="/message",e={token:o.loginMsg.userToken||""};1!=this.btnkg&&(this.btnkg=1,i.default.P_get(n,e).then((function(n){if(o.btnkg=0,console.log(n),1==n.code){var e=n.data;console.log(typeof e),"string"==typeof e&&(e=JSON.parse(e)),console.log(e),o.datas=e}else n.msg?t.showToast({icon:"none",title:n.msg}):t.showToast({icon:"none",title:"获取失败"})})).catch((function(n){o.btnkg=0,console.log(n),t.showToast({icon:"none",title:"获取数据失败"})})))},jump:function(t){var o=this;console.log(t.currentTarget.dataset.type),1!=o.btnkg&&(o.btnkg=1,setTimeout((function(){o.btnkg=0}),1e3),i.default.jump(t))},gologin:function(){t.navigateTo({url:"/pagesA/login/login"})},createGroup:function(){var t=this.tim.createGroup({type:this.$TIM.TYPES.GRP_PUBLIC,name:"阿萨德",memberList:[{userId:"3"},{userId:"4"}]});t.then((function(t){console.log(t.data.group),console.log("sss")})).catch((function(t){console.warn("createGroup error:",t)}))},getGroup:function(){var t=this.tim.getGroupList();t.then((function(t){console.log("群组"),console.log(t.data.groupList)})).catch((function(t){console.warn("getGroupList error:",t)}))},outLoginBtn:function(){var o=this,n=this.tim.logout();n.then((function(n){o.$store.commit("reset"),t.reLaunch({url:"../index/index"})})).catch((function(t){console.log("退出失败")}))}},l(e,"updateUserInfo",(function(){JSON.parse(t.getStorageSync("userInfo"));var o=this.tim.updateMyProfile({nick:loginMsg.nickname,avatar:loginMsg.avatarurl,gender:this.$TIM.TYPES.GENDER_MALE,selfSignature:loginMsg.introduction,allowType:this.$TIM.TYPES.ALLOW_TYPE_ALLOW_ANY});o.then((function(t){console.log("提交资料成功")})).catch((function(t){console.warn("updateMyProfile error:",imError)}))})),l(e,"nodesFliter",(function(t){var o='<div style="align-items: center;word-wrap:break-word;">'+t+"</div>";return o})),l(e,"changeTabBtn",(function(t){this.isActive=t,this.isSDKReady&&this.getConversationList()})),l(e,"getConversationList",(function(){var o=this,n=this.tim.getConversationList();n.then((function(n){t.stopPullDownRefresh();var e=n.data.conversationList;e.length>0&&o.$store.commit("updateConversationList",e)})).catch((function(o){t.stopPullDownRefresh(),console.warn("getConversationList error:",o)}))})),l(e,"toRoom",(function(o){this.$store.commit("updateConversationActive",o),t.navigateTo({url:"./room"})})),l(e,"checkUserToRoom",(function(o){this.$store.commit("createConversationActive",o.userId),t.navigateTo({url:"./room"})})),e)};o.default=g}).call(this,n("543d")["default"])},"2c4e":function(t,o,n){},"42b0":function(t,o,n){"use strict";n.r(o);var e=n("8626"),i=n("6ae0");for(var r in i)"default"!==r&&function(t){n.d(o,t,(function(){return i[t]}))}(r);n("6e4f");var s,a=n("f0c5"),c=n("8c73"),u=Object(a["a"])(i["default"],e["b"],e["c"],!1,null,"55b75823",null,!1,e["a"],s);"function"===typeof c["a"]&&Object(c["a"])(u),o["default"]=u.exports},"6ae0":function(t,o,n){"use strict";n.r(o);var e=n("0c22"),i=n.n(e);for(var r in e)"default"!==r&&function(t){n.d(o,t,(function(){return e[t]}))}(r);o["default"]=i.a},"6e4f":function(t,o,n){"use strict";var e=n("2c4e"),i=n.n(e);i.a},"799d":function(t,o,n){"use strict";(function(t){n("72bd");e(n("66fd"));var o=e(n("42b0"));function e(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,n("543d")["createPage"])},8626:function(t,o,n){"use strict";var e;n.d(o,"b",(function(){return i})),n.d(o,"c",(function(){return r})),n.d(o,"a",(function(){return e}));var i=function(){var t=this,o=t.$createElement,n=(t._self._c,t.hasLogin&&t.conversationList&&t.conversationList.length>0?t.__map(t.conversationList,(function(o,n){var e=t.__get_orig(o),i="custom_img"==o.lastMessage.payload.data?t.nodesFliter("[图片]"):null,r="custom_img"!=o.lastMessage.payload.data?t.nodesFliter(o.lastMessage.messageForShow):null;return{$orig:e,m0:i,m1:r}})):null);t.$mp.data=Object.assign({},{$root:{l0:n}})},r=[]},"8c73":function(t,o,n){"use strict";var e=function(t){t.options.wxsCallMethods||(t.options.wxsCallMethods=[])};o["a"]=e}},[["799d","common/runtime","common/vendor"]]]);