(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages_goods/daiyan_xq/daiyan_xq"],{4936:function(t,n,o){"use strict";var e=function(t){t.options.wxsCallMethods||(t.options.wxsCallMethods=[])};n["a"]=e},"7bfc":function(t,n,o){"use strict";o.r(n);var e=o("c534"),i=o.n(e);for(var a in e)"default"!==a&&function(t){o.d(n,t,(function(){return e[t]}))}(a);n["default"]=i.a},"88a3":function(t,n,o){"use strict";o.d(n,"b",(function(){return i})),o.d(n,"c",(function(){return a})),o.d(n,"a",(function(){return e}));var e={hongbao:function(){return o.e("components/hongbao/hongbao").then(o.bind(null,"3ace"))}},i=function(){var t=this,n=t.$createElement;t._self._c},a=[]},"8d5b":function(t,n,o){"use strict";var e=o("fc97"),i=o.n(e);i.a},bbcd:function(t,n,o){"use strict";(function(t){o("72bd");e(o("66fd"));var n=e(o("fc57"));function e(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,o("543d")["createPage"])},c534:function(t,n,o){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e,i=c(o("b704")),a=o("2f62");function c(t){return t&&t.__esModule?t:{default:t}}function s(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),o.push.apply(o,e)}return o}function u(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?s(Object(o),!0).forEach((function(n){l(t,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))}))}return t}function l(t,n,o){return n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}var r=void 0,d={data:function(){return{btn_kg:0,htmlReset:-1,datas:"",page:2,banner:"",homeSeek:"",homeTeacher:"",homeVideo:"",show_num:0,pid:""}},onLoad:function(t){r=this,this.id=t.id,t.pid?(this.pid=t.pid,console.log("静默关注--------------------------------------》1"),setTimeout((function(){r.getdata()}),500)):r.getdata()},onShow:function(){this.btn_kg=0,this.show_num>0&&r.getdata(),this.show_num++},onPullDownRefresh:function(){wx.stopPullDownRefresh(),this.getdata()},onReachBottom:function(){},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target.dataset.type),r.loginMsg?{title:"51代言",path:"/pages_goods/daiyan_xq/daiyan_xq?id="+r.id+"&pid="+r.loginMsg.id,success:function(t){console.log("成功",t)}}:{title:"51代言",path:"/pages_goods/daiyan_xq/daiyan_xq?id="+r.id,success:function(t){console.log("成功",t)}}},onShareTimeline:function(){return r.loginMsg?{title:"我是代言人，邀您领红包！",imageUrl:r.$store.state.loginMsg.avatarurl,query:"id="+r.id+"&pid="+r.loginMsg.id}:{title:"我是代言人，邀您领红包！",query:"id="+r.id}},computed:u({},(0,a.mapState)(["hasLogin","loginMsg","wxlogin","isLogin","isSDKReady","conversationList"])),watch:{isSDKReady:function(t){t&&(this.updateUserInfo(),this.getConversationList())}},methods:u(u({},(0,a.mapMutations)(["setAbout"])),{},(e={open_hb_fuc:function(t,n){this.$refs.hongbao.open_hb(0,t,n)},shuaxin:function(){this.getdata()},guanzhuFuc_dz:function(n,o,e){var a=this,c={token:a.loginMsg.userToken,type:n,id:o,operate:e};1!=a.btn_kg&&(a.btn_kg=1,i.default.P_post("/attention/operation",c).then((function(n){console.log(n),a.btn_kg=0,-1!=n.code&&(0!=n.code||"请先登录账号~"!=n.msg)?1==n.code&&("affirm"==e?(a.$set(a.datas,"is_praise",1),a.$set(a.datas,"praise_number",a.datas.praise_number-1+2)):(a.$set(a.datas,"is_praise",2),a.$set(a.datas,"praise_number",a.datas.praise_number-1)),t.showToast({icon:"none",title:"操作成功"})):t.navigateTo({url:"/pagesA/login/login"})})).catch((function(n){a.btn_kg=0,console.log(n),t.showToast({icon:"none",title:"操作失败"})})))},guanzhuFuc:function(n,o){var e=this,a={token:e.loginMsg.userToken,type:2,id:n,operate:o};"affirm"!=o?wx.showModal({title:"提示",content:"是否取消关注?",success:function(n){n.confirm?(console.log("用户点击确定"),i.default.P_post("/attention/operation",a).then((function(n){console.log(n),e.btnkg=0,-1!=n.code&&(0!=n.code||"请先登录账号~"!=n.msg)?1==n.code&&(e.getdata(),t.showToast({icon:"none",title:"操作成功"})):t.navigateTo({url:"/pagesA/login/login"})})).catch((function(n){e.btnkg=0,console.log(n),t.showToast({icon:"none",title:"操作失败"})}))):n.cancel&&console.log("用户点击取消")}}):i.default.P_post("/attention/operation",a).then((function(n){console.log(n),e.btnkg=0,-1!=n.code&&(0!=n.code||"请先登录账号~"!=n.msg)?1==n.code&&(e.getdata(),t.showToast({icon:"none",title:"操作成功"})):t.navigateTo({url:"/pagesA/login/login"})})).catch((function(n){e.btnkg=0,console.log(n),t.showToast({icon:"none",title:"操作失败"})}))},getdata:function(){var n=this,o={token:n.loginMsg.userToken,id:n.id};i.default.P_get("/publicAdvocacy/details",o).then((function(t){if(console.log(t),1==t.code){if(n.htmlReset=0,n.datas=t.data,n.pid){if(console.log("静默关注--------------------------------------》2"),n.loginMsg.id==t.data.user_id)return;n.guanzhuFuc(t.data.user_id,"affirm")}}else n.htmlReset=1})).catch((function(o){n.htmlReset=1,console.log(o),t.showToast({icon:"none",title:"获取数据失败"})}))}},l(e,"guanzhuFuc",(function(n,o){var e=this,a={token:e.loginMsg.userToken,type:2,id:n,operate:o};"affirm"!=o?wx.showModal({title:"提示",content:"是否取消关注?",success:function(n){n.confirm?(console.log("用户点击确定"),i.default.P_post("/attention/operation",a).then((function(n){console.log(n),e.btnkg=0,-1!=n.code&&(0!=n.code||"请先登录账号~"!=n.msg)?n.code:t.navigateTo({url:"/pagesA/login/login"})})).catch((function(n){e.btnkg=0,console.log(n),t.showToast({icon:"none",title:"操作失败"})}))):n.cancel&&console.log("用户点击取消")}}):i.default.P_post("/attention/operation",a).then((function(n){console.log(n),e.btnkg=0,-1!=n.code&&(0!=n.code||"请先登录账号~"!=n.msg)?n.code:t.navigateTo({url:"/pagesA/login/login"})})).catch((function(n){e.btnkg=0,console.log(n),t.showToast({icon:"none",title:"关注失败"})}))})),l(e,"getdatalist",(function(){var n=this,o="/getAdvocacyList",e={token:n.loginMsg.userToken,page:n.page};n.data_last||1!=n.btn_kg&&(n.btn_kg=1,i.default.P_get(o,e).then((function(t){if(console.log(t),1==t.code){var o=t.data;if(n.btn_kg=0,"string"==typeof o&&(o=JSON.parse(o)),0==o.length)return void(n.data_last=!0);n.datas=n.datas.concat(o),n.page++}})).catch((function(o){n.btn_kg=0,console.log(o),t.showToast({icon:"none",title:"获取数据失败"})})))})),l(e,"toupiao",(function(n){var o=n.currentTarget.dataset.id,e=this,a={token:e.loginMsg.userToken,aau_id:o,activity_id:e.datas.a_activity_id};i.default.P_post("/activity/vote",a).then((function(n){console.log(n),1==n.code&&(e.$set(e.datas,"is_vote",1),t.showToast({icon:"none",title:"操作成功"}),setTimeout((function(){e.$refs.hongbao.open_hb(0,e.datas.a_activity_id,3)}),1e3))})).catch((function(n){console.log(n),t.showToast({icon:"none",title:"操作失败"})}))})),l(e,"zan",(function(t){console.log(t.currentTarget.dataset.id)})),l(e,"jump",(function(t){i.default.jump(t)})),l(e,"pveimg",(function(t){i.default.pveimg(t)})),l(e,"kffuc",(function(t){console.log(t)})),l(e,"retry",(function(){this.getdata()})),e))};n.default=d}).call(this,o("543d")["default"])},fc57:function(t,n,o){"use strict";o.r(n);var e=o("88a3"),i=o("7bfc");for(var a in i)"default"!==a&&function(t){o.d(n,t,(function(){return i[t]}))}(a);o("8d5b");var c,s=o("f0c5"),u=o("4936"),l=Object(s["a"])(i["default"],e["b"],e["c"],!1,null,"177de4dd",null,!1,e["a"],c);"function"===typeof u["a"]&&Object(u["a"])(l),n["default"]=l.exports},fc97:function(t,n,o){}},[["bbcd","common/runtime","common/vendor"]]]);