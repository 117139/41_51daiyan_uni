(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages_goods/activity/activity"],{"62ed":function(t,e,n){},"6d84":function(t,e,n){"use strict";var a=function(t){t.options.wxsCallMethods||(t.options.wxsCallMethods=[])};e["a"]=a},"7f20":function(t,e,n){"use strict";n.r(e);var a=n("9857"),o=n("f981");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("9da2");var r,c=n("f0c5"),s=n("6d84"),u=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,"b32693e8",null,!1,a["a"],r);"function"===typeof s["a"]&&Object(s["a"])(u),e["default"]=u.exports},"911c":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,o,i=c(n("b704")),r=n("2f62");function c(t){return t&&t.__esModule?t:{default:t}}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={data:function(){return{btn_kg:0,data_last:!1,ad_id:"",hd_time:{day:0,hh:0,mm:0,min:0},page:1,size:20,datas:"",hd_type:1,star_list:[],ph_type:"0"}},computed:u({},(0,r.mapState)(["hasLogin","loginMsg","wxlogin"])),onLoad:function(t){o=this,o.ad_id=t.id,o.getdata()},onShow:function(){},onHide:function(){clearInterval(a)},onUnload:function(){clearInterval(a)},onPullDownRefresh:function(){this.getdata()},onReachBottom:function(){this.getdatalist()},onShareAppMessage:function(){},onShareTimeline:function(){return o.loginMsg?{title:"我是代言人，邀您领红包！",imageUrl:o.$store.state.loginMsg.avatarurl,query:"pid="+o.loginMsg.id+"&id="+o.ad_id}:{title:"我是代言人，邀您领红包！",query:"id="+o.ad_id}},methods:{open_hb_fuc:function(t,e){o.$refs.hongbao.open_hb(0,t,e)},getdata:function(){var e=this,n=this,o={token:n.loginMsg.userToken,id:n.ad_id};i.default.P_get("/activity/details",o).then((function(t){console.log(t),1==t.code&&(n.datas=t.data,2==t.data.isRedBag&&setTimeout((function(){console.log(n.$refs),n.$refs.hongbao1.open_hb(0,n.ad_id,3)}),1e3),n.page=1,e.data_last=!1,n.getdatalist(),a=setInterval((function(){n.hd_time=n.djs(1e3*t.data.end_time)}),1e3))})).catch((function(e){console.log(e),t.showToast({icon:"none",title:"获取数据失败"})}))},getdatalist:function(){var e=this,n="/activity/activityHit",a={token:e.loginMsg.userToken,page:e.page,size:e.size,id:e.ad_id};e.data_last||1!=e.btn_kg&&(e.btn_kg=1,i.default.P_get(n,a).then((function(t){if(console.log(t),e.btn_kg=0,1==t.code){var n=t.data.user_data;"string"==typeof n&&(n=JSON.parse(n)),e.hd_type=t.data.is_act_open;var a=Date.parse(new Date);console.log(a);var o=1e3*t.data.start_time,i=1e3*t.data.end_time;if(e.hd_type=a<o?1:a>i?3:2,1==e.page)e.star_list=n;else{if(0==n.length)return void(e.data_last=!0);e.star_list=e.star_list.concat(n)}e.page++}})).catch((function(n){e.btn_kg=0,console.log(n),t.showToast({icon:"none",title:"获取数据失败"})})))},djs:function(t){var e=new Date,n=t-e.getTime(),a=Math.floor(n/864e5),o=Math.floor(n/36e5%24),i=Math.floor(n/6e4%60),r=Math.floor(n/1e3%60),c={day:a,hh:o,mm:i,min:r};return c},ph_fuc:function(t){var e=this;e.ph_type!=t.currentTarget.dataset.type&&(e.ph_type=t.currentTarget.dataset.type,e.onRetry())},toupiao:function(e){var n=e.currentTarget.dataset.id,a=e.currentTarget.dataset.idx,o=this,r={token:o.loginMsg.userToken,aau_id:n,activity_id:o.star_list[a].a_activity_id};i.default.P_post("/activity/vote",r).then((function(e){console.log(e),1==e.code&&(t.showToast({icon:"none",title:"操作成功"}),o.getdata())})).catch((function(e){console.log(e),t.showToast({icon:"none",title:"操作失败"})}))},getimg:function(t){return i.default.getimg(t)},jump:function(t){i.default.jump(t)}}};e.default=l}).call(this,n("543d")["default"])},9857:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={hongbao:function(){return n.e("components/hongbao/hongbao").then(n.bind(null,"3ace"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.getimg("/static_s//51daiyan/images/pro2/hdxq_bg1_02.jpg")),a=t.getimg("/static_s/51daiyan/images/pro2/hdxq_cxsp.png"),o=2!=t.hd_type?t.getimg("/static_s/51daiyan/images/pro2/hdxq_hdjs.png"):null;t.$mp.data=Object.assign({},{$root:{m0:n,m1:a,m2:o}})},i=[]},"9da2":function(t,e,n){"use strict";var a=n("62ed"),o=n.n(a);o.a},c179:function(t,e,n){"use strict";(function(t){n("72bd");a(n("66fd"));var e=a(n("7f20"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},f981:function(t,e,n){"use strict";n.r(e);var a=n("911c"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a}},[["c179","common/runtime","common/vendor"]]]);