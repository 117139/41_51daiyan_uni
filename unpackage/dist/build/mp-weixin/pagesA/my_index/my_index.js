(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/my_index/my_index"],{"077e":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={hongbao:function(){return n.e("components/hongbao/hongbao").then(n.bind(null,"3ace"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.datas&&1==t.s_type?t.__map(t.data_list,(function(e,n){var o=t.__get_orig(e),i=t.gettime1(n),a=i?t.gettime(e.create_time,1):null,s=i?t.gettime(e.create_time,2):null,c=t.gettime1(n),u=c?t.gettime(e.create_time,4):null,r=c&&1!=u?t.gettime(e.create_time,3):null;return{$orig:o,m0:i,m1:a,m2:s,m3:c,m4:u,m5:r}})):null),o=t.datas&&4==t.s_type?t.__map(t.data_list,(function(e,n){var o=t.__get_orig(e),i=t.gettime(e.create_time,4),a=2==i?t.gettime(e.create_time,3):null,s=t.gettime(e.create_time,2),c=t.gettime(e.create_time,1);return{$orig:o,m6:i,m7:a,m8:s,m9:c}})):null;t.$mp.data=Object.assign({},{$root:{l0:n,l1:o}})},a=[]},"2aee":function(t,e,n){},"3ed7":function(t,e,n){"use strict";(function(t){n("72bd");o(n("66fd"));var e=o(n("63c4"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},5092:function(t,e,n){"use strict";var o=function(t){t.options.wxsCallMethods||(t.options.wxsCallMethods=[])};e["a"]=o},"5f4b":function(t,e,n){"use strict";var o=n("2aee"),i=n.n(o);i.a},"63c4":function(t,e,n){"use strict";n.r(e);var o=n("077e"),i=n("c68b");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("5f4b");var s,c=n("f0c5"),u=n("5092"),r=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,"44707ef2",null,!1,o["a"],s);"function"===typeof u["a"]&&Object(u["a"])(r),e["default"]=r.exports},"9bd3":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,i=s(n("b704")),a=n("2f62");function s(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={data:function(){return{uid:"",htmlReset:0,btn_kg:0,data_last:!1,exceed_number_bl:-1,s_type:1,datas:"",data_list:[],page:1,size:20,gz_type:!1,show_num:0,gz_id:""}},computed:u({},(0,a.mapState)(["hasLogin","loginMsg","wxlogin"])),onLoad:function(e){if(o=this,t.showLoading({title:"正在加载中"}),e.id&&(this.uid=e.id),e.pid){if(this.pid=e.pid,console.log("静默关注--------------------------------------》"),o.loginMsg.id==e.id)return;o.gz_id=e.id}if(console.log("options.scene-------------------------》"),e.scene){var n=decodeURIComponent(e.scene);console.log(n);var i=n.split("=");console.log(n);var a={};a[i[0]]=i[1],this.uid=a.id,o.gz_id=a.id,console.log("静默关注--------------------------------------》")}this.getdata(),this.getdata_cy(),setTimeout((function(){o.gz_id&&o.guanzhuFuc(o.gz_id,"affirm")}),1500)},watch:{hasLogin:function(t){t&&o.gz_id&&o.guanzhuFuc(o.gz_id,"affirm")}},onReady:function(){},onShow:function(){this.btn_kg=0,this.show_num>0&&this.onRetry(),this.show_num++},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){this.onRetry()},onReachBottom:function(){this.getdatalist()},onShareAppMessage:function(t){return"button"===t.from?(console.log(t.target.dataset.type),o.loginMsg?{title:"51代言",path:"/pages_goods/daiyan_xq/daiyan_xq?id="+t.target.dataset.id+"&pid="+o.loginMsg.id,success:function(t){console.log("成功",t)}}:{title:"51代言",path:"/pages_goods/daiyan_xq/daiyan_xq?id="+t.target.dataset.id,success:function(t){console.log("成功",t)}}):"menu"===t.from?o.loginMsg?{title:"51代言",path:"/pagesA/my_index/my_index?id="+o.uid+"&pid="+o.loginMsg.id,success:function(t){console.log("成功",t)}}:{title:"51代言",path:"/pagesA/my_index/my_index?id="+o.uid,success:function(t){console.log("成功",t)}}:void 0},onShareTimeline:function(){return o.loginMsg?{title:"我是代言人，邀您领红包！",imageUrl:o.$store.state.loginMsg.avatarurl,query:"pid="+o.loginMsg.id+"&id="+o.uid}:{title:"我是代言人，邀您领红包！",query:"id="+o.uid}},methods:{cook_ewm:function(e){var n=[];n.push(e),t.previewImage({urls:n,longPressActions:{itemList:["保存图片"],success:function(n){t.saveImageToPhotosAlbum({filePath:e,success:function(){console.log("save success"),t.showToast({icon:"none",title:"保存成功"})}})},fail:function(t){console.log(t.errMsg)}}})},open_hb_fuc:function(t,e){this.$refs.hongbao.open_hb(0,t,e)},shuaxin:function(){this.page=1,this.onRetry()},getB:function(t){if(!t)return 0;t=t.split("-");var e=new Date;return now_y=e.getFullYear(),bbb=now_y-t,bbb},onRetry:function(){this.getdata(),this.data_list=[],this.getdata_cy()},getdata_cy:function(){var e=this,n={id:e.uid};i.default.P_get("/user/getExceedFriend",n).then((function(t){console.log(t),1==t.code&&(e.exceed_number_bl=t.data.exceed_number_bl)})).catch((function(e){console.log(e),t.showToast({icon:"none",title:"获取数据失败"})}))},toroom:function(e){this.hasLogin?(this.$store.commit("createConversationActive",e),t.navigateTo({url:"/pages/tim/room?id="+e})):t.navigateTo({url:"/pagesA/login/login"})},gettime:function(t,e){return 1==e?i.default.gettime(t).date:2==e?i.default.gettime(t).month:3==e?i.default.gettime(t).year:i.default.gettime(t).type},gettime1:function(t){var e=this;if(0==t)return!0;var n=e.data_list[t-1].create_time,o=e.data_list[t].create_time;return i.default.gettime(n).year!=i.default.gettime(o).year||i.default.gettime(n).month!=i.default.gettime(o).month||i.default.gettime(n).date!=i.default.gettime(o).date},getdata:function(){var e=this,n={token:e.loginMsg.userToken?e.loginMsg.userToken:"",user_id:e.uid};1!=e.btn_kg&&(e.btn_kg=1,i.default.P_get("/star/homepage",n).then((function(t){console.log(t),1==t.code?(e.datas=t.data,e.btn_kg=0,e.htmlReset=0,e.page=1,e.data_list=[],e.data_last=!1,e.getdatalist()):e.htmlReset=1})).catch((function(n){e.btn_kg=0,e.htmlReset=1,console.log(n),t.showToast({icon:"none",title:"获取数据失败"})})))},toupiao:function(e){var n=e.currentTarget.dataset.id,o=e.currentTarget.dataset.idx,a=this,s={token:a.loginMsg.userToken,aau_id:n,activity_id:a.data_list[o].a_activity_id};i.default.P_post("/activity/vote",s).then((function(e){console.log(e),1==e.code&&(a.data_list[o].is_vote=1,a.$set(a.data_list[o],"is_vote",1),t.showToast({icon:"none",title:"操作成功"}),setTimeout((function(){a.$refs.hongbao.open_hb(0,a.data_list[o].a_activity_id,3)}),1e3))})).catch((function(e){console.log(e),t.showToast({icon:"none",title:"操作失败"})}))},getdatalist:function(){var e=this,n="/star/getHomepageData",o={token:e.loginMsg.userToken,user_id:e.uid,type:e.s_type,page:e.page,size:e.size};e.data_last||1!=e.btn_kg&&(e.btn_kg=1,i.default.P_get(n,o).then((function(t){if(e.btn_kg=0,console.log(t),1==t.code){var n=t.data;if("string"==typeof n&&(n=JSON.parse(n)),0==n.length)return void(1==e.page?e.data_list=n:e.data_last=!0);1==e.page?e.data_list=n:e.data_list=e.datas.concat(n),e.page++}})).catch((function(n){e.btn_kg=0,console.log(n),t.showToast({icon:"none",title:"获取数据失败"})})))},guanzhu:function(){var t=this;t.gz_type=!t.gz_type},guanzhuFuc:function(e,n){var o=this,a={token:o.loginMsg.userToken,type:2,id:e,operate:n};"affirm"!=n?wx.showModal({title:"提示",content:"是否取消关注?",success:function(e){e.confirm?(console.log("用户点击确定"),i.default.P_post("/attention/operation",a).then((function(e){console.log(e),o.btnkg=0,-1!=e.code&&(0!=e.code||"请先登录账号~"!=e.msg)?1==e.code&&(o.getdata(),t.showToast({icon:"none",title:"操作成功"})):t.navigateTo({url:"/pagesA/login/login"})})).catch((function(e){o.btnkg=0,console.log(e),t.showToast({icon:"none",title:"操作失败"})}))):e.cancel&&console.log("用户点击取消")}}):i.default.P_post("/attention/operation",a).then((function(e){console.log(e),o.btnkg=0,-1!=e.code&&(0!=e.code||"请先登录账号~"!=e.msg)?1==e.code&&(o.getdata(),t.showToast({icon:"none",title:"操作成功"}),o.gz_id=""):t.navigateTo({url:"/pagesA/login/login"})})).catch((function(e){o.btnkg=0,console.log(e),t.showToast({icon:"none",title:"操作失败"})}))},ss_type:function(t){var e=this;e.s_type!=t.currentTarget.dataset.type&&(console.log(t.currentTarget.dataset.type),e.s_type=t.currentTarget.dataset.type,e.onRetry())},pveimg:function(t){i.default.pveimg(t)},jump:function(t){var e=this;1!=e.btn_kg&&(e.btn_kg=1,setTimeout((function(){e.btn_kg=0}),2e3),i.default.jump(t))}}};e.default=l}).call(this,n("543d")["default"])},c68b:function(t,e,n){"use strict";n.r(e);var o=n("9bd3"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a}},[["3ed7","common/runtime","common/vendor"]]]);