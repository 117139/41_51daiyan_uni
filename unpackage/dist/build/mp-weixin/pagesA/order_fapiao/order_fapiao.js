(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/order_fapiao/order_fapiao"],{"0d5f":function(t,e,i){},"210c":function(t,e,i){"use strict";(function(t){i("72bd");o(i("66fd"));var e=o(i("f82f"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"36e1":function(t,e,i){"use strict";i.r(e);var o=i("a7ff"),n=i.n(o);for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);e["default"]=n.a},a7ff:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;r(i("66fd"));var o,n=r(i("b704")),a=i("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function _(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var f={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,htmlReset:-1,data_last:!1,options:{},array:[],fw_index:0,array_tt:[{name:"个人或事业单位",id:1},{name:"企业",id:2}],tt_index:0,fp_name:"",fp_sh:"",fp_qydz:"",fp_qydh:"",fp_khh:"",fp_yhzh:"",o_id:""}},computed:_(_({},(0,a.mapState)(["hasLogin","userName","loginMsg","loginDatas"])),{},{style:function(){var t=this.StatusBar,e=this.CustomBar,i="height:".concat(e,"px;padding-top:").concat(t,"px;");return i},style1:function(){var t=this.StatusBar,e="top:".concat(t,"px;");return e}}),onPageScroll:function(t){console.log(t),this.PageScroll=t.scrollTop},onPullDownRefresh:function(){t.stopPullDownRefresh()},onLoad:function(t){if(o=this,o.options=t,console.log(t.orderRemark),1==t.putong){var e={name:"普通发票",id:1};o.array.push(e)}if(1==t.zengzhi){var i={name:"增值税专用发票",id:2};o.array.push(i)}if(t.orderRemark){var n=JSON.parse(t.orderRemark);if(console.log(n),n.invoice){var a=n.invoice;1==a.oi_type?this.fw_index=0:1==t.putong?this.fw_index=1:this.fw_index=0,this.tt_index=1==a.oi_rise_type?0:1,this.fp_name=a.oi_rise_name,this.fp_sh=a.oi_unit_hutchet,this.fp_qydz=a.oi_reg_address,this.fp_qydh=a.oi_reg_phone,this.fp_khh=a.oi_open_bank,this.fp_yhzh=a.oi_bank_account}}t.o_id&&(this.o_id=t.o_id),o.onRetry()},methods:_(_({},(0,a.mapMutations)(["login","logindata","logout","setplatform"])),{},{sub:function(e){var i=getCurrentPages(),a=i[i.length-2];if(0==e)return this.o_id||a.setData({invoice_idx:o.options.idx,invoice:-1}),void wx.navigateBack({delta:1});if(this.fp_name){var r={oi_make_type:1,oi_type:this.array[o.fw_index].id,oi_rise_type:this.array_tt[this.tt_index].id,oi_rise_name:this.fp_name,oi_unit_hutchet:"",oi_reg_address:"",oi_reg_phone:"",oi_open_bank:"",oi_bank_account:""};if(this.o_id&&(r={token:o.loginMsg.userToken,o_id:this.o_id,oi_make_type:1,oi_type:this.array[o.fw_index].id,oi_rise_type:this.array_tt[this.tt_index].id,oi_rise_name:this.fp_name,oi_unit_hutchet:"",oi_reg_address:"",oi_reg_phone:"",oi_open_bank:"",oi_bank_account:""}),2==this.array_tt[this.tt_index].id){if(!this.fp_sh)return void t.showToast({icon:"none",title:"请输入单位税号"});if(!this.fp_qydz)return void t.showToast({icon:"none",title:"请输入注册地址"});if(!this.fp_qydh)return void t.showToast({icon:"none",title:"请输入注册电话"});if(!this.fp_khh)return void t.showToast({icon:"none",title:"请输入开户银行"});if(!this.fp_yhzh)return void t.showToast({icon:"none",title:"请输入银行账号"});r={oi_make_type:1,oi_type:this.array[o.fw_index].id,oi_rise_type:this.array_tt[this.tt_index].id,oi_rise_name:this.fp_name,oi_unit_hutchet:this.fp_sh,oi_reg_address:this.fp_qydz,oi_reg_phone:this.fp_qydh,oi_open_bank:this.fp_khh,oi_bank_account:this.fp_yhzh},this.o_id&&(r={token:o.loginMsg.userToken,o_id:this.o_id,oi_make_type:1,oi_type:this.array[o.fw_index].id,oi_rise_type:this.array_tt[this.tt_index].id,oi_rise_name:this.fp_name,oi_unit_hutchet:this.fp_sh,oi_reg_address:this.fp_qydz,oi_reg_phone:this.fp_qydh,oi_open_bank:this.fp_khh,oi_bank_account:this.fp_yhzh})}console.log(r),this.o_id?n.default.P_post("/order/applyOrderInvoice",r).then((function(e){console.log(e),1==e.code?(t.showToast({icon:"none",title:"提交成功"}),setTimeout((function(){wx.navigateBack({delta:1})}),1e3)):e.msg?t.showToast({icon:"none",title:e.msg}):t.showToast({icon:"none",title:"提交失败"})})).catch((function(e){console.log(e),t.showToast({icon:"none",title:"提交失败"})})):(a.setData({invoice_idx:o.options.idx,invoice:r}),wx.navigateBack({delta:1}))}else t.showToast({icon:"none",title:"请输入发票抬头"})},bindPickerChange:function(t){var e=t.currentTarget.dataset;1==e.type&&(o.fw_index=t.detail.value,console.log(o.fw_index)),2==e.type&&(o.tt_index=t.detail.value,console.log(o.tt_index))},onRetry:function(){o.htmlReset=0},getbanner:function(){var e=this,i={},o="/entrance";t.showLoading({title:"正在获取数据"}),n.default.P_get(o,i).then((function(i){if(e.btn_kg=0,console.log(i),1==i.code){var o=i.data;console.log(typeof o),"string"==typeof o&&(o=JSON.parse(o)),e.banner=o,console.log(o)}else i.msg?t.showToast({icon:"none",title:i.msg}):t.showToast({icon:"none",title:"操作失败"})})).catch((function(i){e.btn_kg=0,console.log(i),t.showToast({icon:"none",title:"获取数据失败"})}))},jump:function(t){var e=this;1!=e.btn_kg&&(e.btn_kg=1,setTimeout((function(){e.btn_kg=0}),1e3),n.default.jump(t))},getimg:function(t){return n.default.getimg(t)}})};e.default=f}).call(this,i("543d")["default"])},cfc5:function(t,e,i){"use strict";var o=i("0d5f"),n=i.n(o);n.a},d6ca:function(t,e,i){"use strict";var o;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return o}));var n=function(){var t=this,e=t.$createElement;t._self._c},a=[]},f82f:function(t,e,i){"use strict";i.r(e);var o=i("d6ca"),n=i("36e1");for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);i("cfc5");var r,s=i("f0c5"),_=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,"6d318ae5",null,!1,o["a"],r);e["default"]=_.exports}},[["210c","common/runtime","common/vendor"]]]);